<!DOCTYPE html>
<html>
  <head>
    <title>Mapa de información por país Covid-19, en colaboración con los Alumnos de 6o Semestre de Sistemas de la Universidad DeLasalle Bajío hemos creado un mapa mundial con los casos de Covid-19 en tiempo real</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <link rel="apple-touch-icon" sizes="57x57" href="img/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="img/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="img/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="img/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="img/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="img/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="img/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="img/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="img/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="img/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="img/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon/favicon-16x16.png">
    <link rel="manifest" href="img/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="img/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href='https://fonts.googleapis.com/css?family=Barlow Condensed' rel='stylesheet'>
    <link href='screen.css' rel='stylesheet'>
    <script src="https://kit.fontawesome.com/b23a88639a.js" crossorigin="anonymous"></script>
    <style>
        svg {
  fill: red;
}
        .sticky-container{
            padding:0px;
            margin:0px;
            position:fixed;
            right:-170px;
            top:230px;
            width:210px;
            z-index: 1100;
        }
        .sticky li{
            border-radius: 4px 0 0 4px;
            list-style-type:none;
            background-color:#fff;
            color:#efefef;
            height:46px;
            padding:0px;
            
            margin-top: 20px;
            /*margin:0px 0px 1px 0px;*/
            -webkit-transition:all 0.25s ease-in-out;
            -moz-transition:all 0.25s ease-in-out;
            -o-transition:all 0.25s ease-in-out;
            transition:all 0.25s ease-in-out;
            cursor:pointer;
            -webkit-box-shadow: 0px 10px 23px -13px grey;
            box-shadow: 0px 10px 23px -13px grey;
        }
        .sticky li:hover{
            margin-left:-115px;
        }
        .sticky li svg{
            float:left;
            margin:5px 4px;
            margin-right:5px;
        }
        .sticky li p{
            padding-top:5px;
            margin:0px;
            line-height:16px;
            font-size:11px;
        }
        .sticky li p span{
            text-decoration:none;
            color:rgb(0, 0, 0);
        }
        .sticky li p a:hover{
            text-decoration:underline;
        }
        a:hover{
            color: #B40404;
            text-decoration:underline;
        }
      #map {
        height: 100%;
      }
 
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }

    </style>
  </head>
  <body >
        <div class="container">
            <div class="header__nav__list__container">
                <header class="header header-menu header--fixed header--home header--scroll-links">
                    <div class="container">
                        <div class="header__container">
                            <a href="#" onclick="console.log('abriendo busqueda')" class="btn-hamburger">
                                 <!--//*background-color:#000;content:'';*/-->
                                <span class="fas fa-search"></span>
                            </a>
                            <h1 class="logo logo--site"><a ></a></h1>
                        </div>
                        <!--/header__container-->
                    </div>
                    <!--/container-->
                </header>
            </div>
        </div>
    <!--/header__nav-->
    <div id="map"></div>
    <div class="sticky-container">
        <ul class="sticky">
            <li>
                <svg width="32" height="32" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="head-side-virus" class="svg-inline--fa fa-head-side-virus fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#B40404" d="M272,240a16,16,0,1,0,16,16A16,16,0,0,0,272,240Zm-64-64a16,16,0,1,0,16,16A16,16,0,0,0,208,176Zm301.2,99c-20.93-47.12-48.43-151.73-73.07-186.75A207.9,207.9,0,0,0,266.09,0H192C86,0,0,86,0,192A191.23,191.23,0,0,0,64,334.81V512H320V448h64a64,64,0,0,0,64-64V320H480A32,32,0,0,0,509.2,275ZM368,240H355.88c-28.51,0-42.79,34.47-22.63,54.63l8.58,8.57a16,16,0,1,1-22.63,22.63l-8.57-8.58C290.47,297.09,256,311.37,256,339.88V352a16,16,0,0,1-32,0V339.88c0-28.51-34.47-42.79-54.63-22.63l-8.57,8.58a16,16,0,0,1-22.63-22.63l8.58-8.57c20.16-20.16,5.88-54.63-22.63-54.63H112a16,16,0,0,1,0-32h12.12c28.51,0,42.79-34.47,22.63-54.63l-8.58-8.57a16,16,0,0,1,22.63-22.63l8.57,8.58c20.16,20.16,54.63,5.88,54.63-22.63V96a16,16,0,0,1,32,0v12.12c0,28.51,34.47,42.79,54.63,22.63l8.57-8.58a16,16,0,0,1,22.63,22.63l-8.58,8.57C313.09,173.53,327.37,208,355.88,208H368a16,16,0,0,1,0,32Z"></path></svg>
                <p><span>Casos: </span><span id="txtconfirmedglobal"></span>
                <br>
                <span>Nuevos: </span><span id="txtnewcasesglobal"></span></p>
            </li>
            <li>
                <svg width="32" height="32" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="heartbeat" class="svg-inline--fa fa-heartbeat fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#088A08" d="M320.2 243.8l-49.7 99.4c-6 12.1-23.4 11.7-28.9-.6l-56.9-126.3-30 71.7H60.6l182.5 186.5c7.1 7.3 18.6 7.3 25.7 0L451.4 288H342.3l-22.1-44.2zM473.7 73.9l-2.4-2.5c-51.5-52.6-135.8-52.6-187.4 0L256 100l-27.9-28.5c-51.5-52.7-135.9-52.7-187.4 0l-2.4 2.4C-10.4 123.7-12.5 203 31 256h102.4l35.9-86.2c5.4-12.9 23.6-13.2 29.4-.4l58.2 129.3 49-97.9c5.9-11.8 22.7-11.8 28.6 0l27.6 55.2H481c43.5-53 41.4-132.3-7.3-182.1z"></path></svg>
                <p><span>Recuperados:</span><br><span id="txtrecoveredglobal"></span></p>
            </li>
            <li>
                <svg width="32" height="32" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="skull-crossbones" class="svg-inline--fa fa-skull-crossbones fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="black" d="M439.15 453.06L297.17 384l141.99-69.06c7.9-3.95 11.11-13.56 7.15-21.46L432 264.85c-3.95-7.9-13.56-11.11-21.47-7.16L224 348.41 37.47 257.69c-7.9-3.95-17.51-.75-21.47 7.16L1.69 293.48c-3.95 7.9-.75 17.51 7.15 21.46L150.83 384 8.85 453.06c-7.9 3.95-11.11 13.56-7.15 21.47l14.31 28.63c3.95 7.9 13.56 11.11 21.47 7.15L224 419.59l186.53 90.72c7.9 3.95 17.51.75 21.47-7.15l14.31-28.63c3.95-7.91.74-17.52-7.16-21.47zM150 237.28l-5.48 25.87c-2.67 12.62 5.42 24.85 16.45 24.85h126.08c11.03 0 19.12-12.23 16.45-24.85l-5.5-25.87c41.78-22.41 70-62.75 70-109.28C368 57.31 303.53 0 224 0S80 57.31 80 128c0 46.53 28.22 86.87 70 109.28zM280 112c17.65 0 32 14.35 32 32s-14.35 32-32 32-32-14.35-32-32 14.35-32 32-32zm-112 0c17.65 0 32 14.35 32 32s-14.35 32-32 32-32-14.35-32-32 14.35-32 32-32z"></path></svg>
                <p><span>Muertes: </span><span id="txtdeathsglobal"></span>
                <br>
                <span>Nuevas: </span><span id="txtnewdeathsglobal"></span></p>
            </li>
        </ul>
    </div>
    <script>
 
    var coordenadas = {
        lat: 0, 
        lng: 0
        }

    var propiedades = {
        center: coordenadas,
        zoom: 3,
        mapTypeControl: false
        }

 

    function iniciaMapa() {

        
                    
        var lista;
        fetch('paises.json')
        .then(function(response) {
        response.json().then(function(datos) {
        lista=datos;
        });
        })
        .catch(function(error) {
                console.log('Hubo un problema con la petición Fetch:' + error.message);
        });
        var latitud=0,longitud=0,flag="";     
        fetch('https://corona.lmao.ninja/countries')
        .then(function(respuesta) {
                        respuesta.json().then(function(datospaises) {
                            const map = new google.maps.Map(document.getElementById('map'), propiedades);
                            datospaises.forEach( registro => {
                                if(registro.countryInfo.lat==0 && registro.countryInfo.long==0){
                                    lista.forEach( element => {
                                            if(registro.country==element.CountryName){
                                                longitud=element.CapitalLongitude;
                                                latitud=element.CapitalLatitude;
                                                flag="<img  src="+"https://www.countryflags.io/"+element.CountryCode +"/flat/64.png"+">";
                                            }
                                            });
                                }else{
                                    latitud=registro.countryInfo.lat;
                                    longitud=registro.countryInfo.long;
                                    flag="<img width="+60+" height="+40+" src="+registro.countryInfo.flag+">";
                                }

                                if(registro.countryInfo.lat==0 && registro.countryInfo.long==0){
                                   // console.log(latitud+","+longitud+","+flag);
                                }
                                    
                                    var información = flag +"<br><br><strong>País:</strong> "+ registro.country +"<br><strong>Casos:</strong> " + registro.cases + "<br><strong>Nuevos hoy:</strong> " + registro.todayCases + "<br><strong>Muertes:</strong> " + registro.deaths + "<br><strong>Muertes Hoy:</strong> " + registro.todayDeaths + "<br><strong>Recuperados:</strong> " + registro.recovered + "<br><strong>Activos:</strong> " + registro.active + "<br><strong>Críticos:</strong> " + registro.critical + "<br><strong>Casos por millón:</strong> " + registro.casesPerOneMillion;
                                   
                                    var infowindow = new google.maps.InfoWindow({
                                        content: información
                                    });

                                    var icono = {
                                        url: "img/covid-icon.png", // url imagen
                                        scaledSize: new google.maps.Size(50, 50)
                                    };

                                    let marker = new google.maps.Marker({
                                        map: map,
                                        position: new google.maps.LatLng(latitud,longitud),
                                        title: registro.country,
                                        icon: {
                                            scaledSize: new google.maps.Size(20,20),
    url: 'data:image/svg+xml;utf-8, \
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="biohazard" class="svg-inline--fa fa-biohazard fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="midnightblue" stroke="red" d="M287.9 112c18.6 0 36.2 3.8 52.8 9.6 13.3-10.3 23.6-24.3 29.5-40.7-25.2-10.9-53-17-82.2-17-29.1 0-56.9 6-82.1 16.9 5.9 16.4 16.2 30.4 29.5 40.7 16.5-5.7 34-9.5 52.5-9.5zM163.6 438.7c12-11.8 20.4-26.4 24.5-42.4-32.9-26.4-54.8-65.3-58.9-109.6-8.5-2.8-17.2-4.6-26.4-4.6-7.6 0-15.2 1-22.5 3.1 4.1 62.8 35.8 118 83.3 153.5zm224.2-42.6c4.1 16 12.5 30.7 24.5 42.5 47.4-35.5 79.1-90.7 83-153.5-7.2-2-14.7-3-22.2-3-9.2 0-18 1.9-26.6 4.7-4.1 44.2-26 82.9-58.7 109.3zm113.5-205c-17.6-10.4-36.3-16.6-55.3-19.9 6-17.7 10-36.4 10-56.2 0-41-14.5-80.8-41-112.2-2.5-3-6.6-3.7-10-1.8-3.3 1.9-4.8 6-3.6 9.7 4.5 13.8 6.6 26.3 6.6 38.5 0 67.8-53.8 122.9-120 122.9S168 117 168 49.2c0-12.1 2.2-24.7 6.6-38.5 1.2-3.7-.3-7.8-3.6-9.7-3.4-1.9-7.5-1.2-10 1.8C134.6 34.2 120 74 120 115c0 19.8 3.9 38.5 10 56.2-18.9 3.3-37.7 9.5-55.3 19.9-34.6 20.5-61 53.3-74.3 92.4-1.3 3.7.2 7.7 3.5 9.8 3.3 2 7.5 1.3 10-1.6 9.4-10.8 19-19.1 29.2-25.1 57.3-33.9 130.8-13.7 163.9 45 33.1 58.7 13.4 134-43.9 167.9-10.2 6.1-22 10.4-35.8 13.4-3.7.8-6.4 4.2-6.4 8.1.1 4 2.7 7.3 6.5 8 39.7 7.8 80.6.8 115.2-19.7 18-10.6 32.9-24.5 45.3-40.1 12.4 15.6 27.3 29.5 45.3 40.1 34.6 20.5 75.5 27.5 115.2 19.7 3.8-.7 6.4-4 6.5-8 0-3.9-2.6-7.3-6.4-8.1-13.9-2.9-25.6-7.3-35.8-13.4-57.3-33.9-77-109.2-43.9-167.9s106.6-78.9 163.9-45c10.2 6.1 19.8 14.3 29.2 25.1 2.5 2.9 6.7 3.6 10 1.6s4.8-6.1 3.5-9.8c-13.1-39.1-39.5-72-74.1-92.4zm-213.4 129c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z"></path></svg>'
  }
                                    });

                                    marker.addListener('click', function() {
                                        infowindow.open(map, marker);
                                    });

                            });

                        });

                    })
        .catch(function(error) {
            console.log('Hubo un problema con la petición Fetch:' + error.message);
        });
        










        
        fetch("https://coronavirus-monitor.p.rapidapi.com/coronavirus/worldstat.php", {
            "method": "GET",
            "headers": {
                "x-rapidapi-host": "coronavirus-monitor.p.rapidapi.com",
                "x-rapidapi-key": "32e27eda20msh4d6db7d143a67c6p155a35jsn03c763a6fb2d"
            }
        })
        .then(response => {
           
            response.json().then(function(dato) {
                console.log(dato);
                
                
                document.getElementById('txtconfirmedglobal').innerHTML = "";
                document.getElementById('txtnewcasesglobal').innerHTML = "";
                document.getElementById('txtrecoveredglobal').innerHTML = "";
                document.getElementById('txtdeathsglobal').innerHTML = "";
                document.getElementById('txtnewdeathsglobal').innerHTML = "";
                document.getElementById('txtconfirmedglobal').innerHTML =dato.total_cases;
                document.getElementById('txtnewcasesglobal').innerHTML = dato.new_cases;
                document.getElementById('txtrecoveredglobal').innerHTML= dato.total_recovered;
                document.getElementById('txtdeathsglobal').innerHTML = dato.total_deaths;
                document.getElementById('txtnewdeathsglobal').innerHTML = dato.new_deaths;
            
            });
        })
        .catch(err => {
            console.log(err);
        });
        
    }
 


 
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyADjOfdGIg-7JiqjoTstMN9el4g-nLhxxA&callback=iniciaMapa"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    
    
  </body>
</html>
