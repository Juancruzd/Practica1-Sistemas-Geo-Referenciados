<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" sizes="57x57" href="../img/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../img/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../img/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../img/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../img/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../img/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../img/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../img/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../img/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="../img/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../img/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../img/favicon/favicon-16x16.png">
    <link rel="manifest" href="../img/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="../img/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    
    <title>Mapa Espia</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link href='https://fonts.googleapis.com/css?family=Barlow Condensed' rel='stylesheet'>
    <style>
         body{
            background-color: #efefef;
            font-family: 'Barlow Condensed';font-size: 15px;
        }
        #map{    
                width: 100%;
                height: 500px;
        }

        #contenedorpracticas {
            width: 100%;
        }
        .container {
        padding: 2rem 0rem;
        }

        h4 {
        margin: 2rem 0rem 1rem;
        }

        td, th {
            vertical-align: middle;
        }
    </style>
  </head>
  <body>
      <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-firestore.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

    <div class="w3-top">
        <div class="w3-bar w3-white w3-padding w3-card" style="letter-spacing:4px;">
         <!-- <a href="index.html" class="w3-bar-item w3-button">Inicio</a>-->
          <!-- Right-sided navbar links. Hide them on small screens -->
          <div class="w3-right w3-hide-small">
            <a href="#" class="w3-bar-item w3-button">Juan de Dios Guadalupe Cruz Delgado</a>
          </div>
        </div>
      </div>
      <div class="container">
        <div class="container-fluid">
            <div class="row">
                <div class="col-xs-6 col-md-4 p-5">
                    <h4>Usuarios conectados</h4>
                    <table  class="table table-bordered ">
                        <thead>
                          <tr>
                            <th scope="col " class="col-12 col-lg-1 col-md-2 col-sm-1">#</th>
                            <th scope="col" class="col-12 col-lg-8 col-md-5 col-sm-7">Nombre</th>
                            <th scope="col" class="col-12 col-lg-3 col-md-5 col-sm-4">Accion</th>
                          </tr>
                        </thead>
    
                        <tbody id="lista">
                        </tbody>
                      </table>

                </div>
                <div class="col-xs-12 col-md-8 p-5">
                    <div id="map"></div>
                </div>
              </div>
        </div>
    </div>
    <script>
        var _0x4bce=['docChanges','panTo','OnClick','botonborrar','doc','lat','setMap','modified','where','catch','jdk-67024','button','Modified:\x20','firestore','tdbutton','LatLng','Size','personamovil','value','nombre','class','New:\x20','Longitud','156274067262','Point','log','estado','setAttribute','1:156274067262:web:ce191148ff46b892f88e6f','lng','apellido','removeItem','textContent','jdk-67024.appspot.com','usuario','setPosition','collection','https://www.interbolivia.com/wp-content/uploads/2018/12/pulse.gif','data','innerHTML','get','createElement','onSnapshot','getItem','jdk-67024.firebaseapp.com','codigo','Marker','push','getElementById','Map','appendChild','setItem','Error\x20getting\x20document:\x20','idusuarioseleccionado','https://jdk-67024.firebaseio.com','Latitud','lista','Seleccionarusuariomapa(','stringify','coordenadas','Removed:\x20','maps','\x20Ver\x20ubicacion','glyphicon\x20glyphicon-trash','added','Ver\x20ubicacion','type'];(function(_0x402e4f,_0x4bcebd){var _0x31b416=function(_0x5b0716){while(--_0x5b0716){_0x402e4f['push'](_0x402e4f['shift']());}};_0x31b416(++_0x4bcebd);}(_0x4bce,0x171));var _0x31b4=function(_0x402e4f,_0x4bcebd){_0x402e4f=_0x402e4f-0x0;var _0x31b416=_0x4bce[_0x402e4f];return _0x31b416;};var firebaseConfig={'apiKey':'AIzaSyAehJe1oQZOYjOWxWoMSAI1bASKm5uM7IY','authDomain':_0x31b4('0xa'),'databaseURL':_0x31b4('0x14'),'projectId':_0x31b4('0x2b'),'storageBucket':_0x31b4('0x42'),'messagingSenderId':_0x31b4('0x38'),'appId':_0x31b4('0x3d')};firebase['initializeApp'](firebaseConfig);var db=firebase[_0x31b4('0x2e')]();db[_0x31b4('0x2')](_0x31b4('0x32'))[_0x31b4('0x8')]({'includeMetadataChanges':!![]},function(_0xde2c9d){_0xde2c9d[_0x31b4('0x21')]()['forEach'](function(_0x31a790){obtenerusuarios();if(_0x31a790[_0x31b4('0x20')]===_0x31b4('0x1e')){console[_0x31b4('0x3a')](_0x31b4('0x36'),_0x31a790[_0x31b4('0x25')]['data']());}if(_0x31a790[_0x31b4('0x20')]===_0x31b4('0x28')){console['log'](_0x31b4('0x2d'),_0x31a790[_0x31b4('0x25')][_0x31b4('0x4')]());}if(_0x31a790['type']==='removed'){console[_0x31b4('0x3a')](_0x31b4('0x1a'),_0x31a790[_0x31b4('0x25')][_0x31b4('0x4')]());}});});var listOfObjects=[];var interval=null;function obtenerusuarios(){db[_0x31b4('0x2')](_0x31b4('0x32'))[_0x31b4('0x29')](_0x31b4('0x3b'),'==',0x1)[_0x31b4('0x6')]()['then'](function(_0x3bc96a){listOfObjects=[];document[_0x31b4('0xe')]('lista')[_0x31b4('0x5')]='';_0x3bc96a['forEach'](function(_0x5793d1){var _0x3fb8e8={'nombre':'','apellido':'','usuario':'','lat':0x0,'lng':0x0};_0x3fb8e8[_0x31b4('0x34')]=_0x5793d1[_0x31b4('0x4')]()[_0x31b4('0x34')];_0x3fb8e8['apellido']=_0x5793d1[_0x31b4('0x4')]()['apellido'];_0x3fb8e8[_0x31b4('0x0')]=_0x5793d1['data']()[_0x31b4('0x0')];_0x3fb8e8['lat']=_0x5793d1[_0x31b4('0x4')]()[_0x31b4('0x19')][_0x31b4('0x15')];_0x3fb8e8[_0x31b4('0x3e')]=_0x5793d1[_0x31b4('0x4')]()[_0x31b4('0x19')][_0x31b4('0x37')];listOfObjects[_0x31b4('0xd')](_0x3fb8e8);var _0x71416e=document[_0x31b4('0x7')]('tr');_0x71416e[_0x31b4('0x3c')](_0x31b4('0x35'),'');_0x71416e[_0x31b4('0x3c')]('id',_0x31b4('0x0')+_0x5793d1['id']);var _0x3fe462=document[_0x31b4('0xe')](_0x31b4('0x16'));_0x3fe462[_0x31b4('0x10')](_0x71416e);var _0x2d2d97=document[_0x31b4('0xe')](_0x31b4('0x0')+_0x5793d1['id']);var _0x7d53a0=document[_0x31b4('0x7')]('th');_0x7d53a0[_0x31b4('0x3c')]('class','');_0x7d53a0[_0x31b4('0x41')]=_0x5793d1['id'];_0x7d53a0[_0x31b4('0x3c')]('id',_0x31b4('0xb')+_0x5793d1['id']);_0x2d2d97[_0x31b4('0x10')](_0x7d53a0);var _0x48487d=document[_0x31b4('0x7')]('td');_0x48487d[_0x31b4('0x3c')](_0x31b4('0x35'),'');_0x48487d[_0x31b4('0x41')]=_0x5793d1[_0x31b4('0x4')]()[_0x31b4('0x34')]+'\x20'+_0x5793d1[_0x31b4('0x4')]()[_0x31b4('0x3f')];_0x2d2d97[_0x31b4('0x10')](_0x48487d);var _0x4305c5=document['createElement']('td');_0x4305c5[_0x31b4('0x3c')]('id',_0x31b4('0x2f')+_0x5793d1['id']);_0x2d2d97[_0x31b4('0x10')](_0x4305c5);var _0x3f2be3=document[_0x31b4('0x7')](_0x31b4('0x2c'));_0x3f2be3[_0x31b4('0x3c')](_0x31b4('0x33'),_0x31b4('0x1f'));_0x3f2be3[_0x31b4('0x3c')](_0x31b4('0x35'),'btn\x20btn-success\x20m-1');_0x3f2be3[_0x31b4('0x3c')](_0x31b4('0x23'),_0x31b4('0x17')+JSON[_0x31b4('0x18')](_0x5793d1['id'])+')');_0x3f2be3[_0x31b4('0x3c')]('id',_0x31b4('0x24')+_0x5793d1['id']);_0x4305c5[_0x31b4('0x10')](_0x3f2be3);var _0x52a17a=document[_0x31b4('0x7')]('i');_0x52a17a['setAttribute'](_0x31b4('0x35'),_0x31b4('0x1d'));_0x52a17a[_0x31b4('0x41')]=_0x31b4('0x1c');_0x3f2be3[_0x31b4('0x10')](_0x52a17a);});})[_0x31b4('0x2a')](function(_0x28c825){console[_0x31b4('0x3a')]('Error\x20getting\x20documents:\x20',_0x28c825);});}var coordenadasiniciales={'lat':0x0,'lng':0x0};var map;var propiedades={'center':coordenadasiniciales,'zoom':0x28,'mapTypeId':'terrain'};function Seleccionarusuariomapa(_0x3a15d1){localStorage[_0x31b4('0x40')](_0x31b4('0x13'));localStorage[_0x31b4('0x11')]('idusuarioseleccionado',_0x3a15d1);if(interval!=null){clearInterval(interval);}iniciaMapa();}function iniciaMapa(){var _0x3d7a1c=localStorage[_0x31b4('0x9')](_0x31b4('0x13'));if(_0x3d7a1c!=null){map=new google[(_0x31b4('0x1b'))][(_0x31b4('0xf'))](document[_0x31b4('0xe')]('map'),propiedades);var _0x10c049={'url':_0x31b4('0x3'),'scaledSize':new google[(_0x31b4('0x1b'))][(_0x31b4('0x31'))](0x32,0x32),'origin':new google[(_0x31b4('0x1b'))][(_0x31b4('0x39'))](0x0,0x0),'anchor':new google[(_0x31b4('0x1b'))][(_0x31b4('0x39'))](0x0,0x0)};var _0x384e35=new google['maps'][(_0x31b4('0xc'))]({'position':{'lat':0x0,'lng':0x0},'icon':_0x10c049,'scaledSize':new google[(_0x31b4('0x1b'))][(_0x31b4('0x31'))](0x32,0x32),'map':map});if(navigator['geolocation']){interval=setInterval(function(){moverPosicion(_0x384e35);},0x3e8);}}}function moverPosicion(_0x412d47){var _0x50960a=localStorage[_0x31b4('0x9')](_0x31b4('0x13'));if(_0x50960a!=null){db[_0x31b4('0x2')](_0x31b4('0x32'))[_0x31b4('0x25')](_0x50960a)[_0x31b4('0x6')]()['then'](function(_0x30edc4){var _0x1f071b={'lat':0x0,'lng':0x0};if(_0x30edc4[_0x31b4('0x4')]()[_0x31b4('0x3b')]==0x1){_0x1f071b['lat']=_0x30edc4[_0x31b4('0x4')]()['coordenadas'][_0x31b4('0x15')];_0x1f071b[_0x31b4('0x3e')]=_0x30edc4[_0x31b4('0x4')]()[_0x31b4('0x19')][_0x31b4('0x37')];_0x412d47[_0x31b4('0x1')](new google[(_0x31b4('0x1b'))][(_0x31b4('0x30'))](_0x1f071b[_0x31b4('0x26')],_0x1f071b[_0x31b4('0x3e')]));_0x412d47[_0x31b4('0x27')](map);map[_0x31b4('0x22')](new google[(_0x31b4('0x1b'))][(_0x31b4('0x30'))](_0x1f071b[_0x31b4('0x26')],_0x1f071b[_0x31b4('0x3e')]));map['setCenter'](_0x1f071b);}else{localStorage[_0x31b4('0x40')]('idusuarioseleccionado');_0x412d47['setMap'](null);}})[_0x31b4('0x2a')](function(_0x2a730a){console['error'](_0x31b4('0x12'),_0x2a730a);});}}


    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyADjOfdGIg-7JiqjoTstMN9el4g-nLhxxA&callback=iniciaMapa">
    </script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
  </body>
</html>
